{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport 'isomorphic-fetch';\nimport Layout from '../components/Layout';\nimport ChannelGrid from '../components/ChannelGrid';\nimport PodcastList from '../components/PodcastList';\nimport PodcastListWithClick from '../components/PodcastListWithClick';\nimport PodcastPlayer from '../components/PodcastPlayer';\nimport Error from './_error';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"openPodcast\", function (event, podcast) {\n      if (event.metaKey || event.ctrlKey || event.shiftKey || event.nativeEvent && event.nativeEvent.which === 2) {\n        // Si estÃ¡ haciendo Ctrl+Click o Cmd+Click, dejamos que el click suceda normalmente\n        return;\n      }\n\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: podcast\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closePodcast\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: null\n      });\n    });\n\n    _this.state = {\n      openPodcast: null\n    };\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          channel = _this$props.channel,\n          audioClips = _this$props.audioClips,\n          series = _this$props.series,\n          statusCode = _this$props.statusCode;\n      var openPodcast = this.state.openPodcast;\n\n      if (statusCode !== 200) {\n        return __jsx(Error, {\n          statusCode: statusCode\n        });\n      }\n\n      return __jsx(Layout, {\n        title: channel.title\n      }, openPodcast && __jsx(PodcastPlayer, {\n        clip: openPodcast,\n        onClose: this.closePodcast\n      }), __jsx(\"div\", {\n        style: {\n          backgroundImage: \"url(\".concat(channel.urls.banner_image.original, \")\")\n        },\n        className: \"jsx-1404733386\" + \" \" + \"banner\"\n      }), __jsx(\"h1\", {\n        className: \"jsx-1404733386\"\n      }, channel.title), series.length > 0 && __jsx(\"div\", {\n        className: \"jsx-1404733386\"\n      }, __jsx(\"h2\", {\n        className: \"jsx-1404733386\"\n      }, \"Series\"), __jsx(ChannelGrid, {\n        channels: series\n      })), __jsx(\"h2\", {\n        className: \"jsx-1404733386\"\n      }, \"Ultimos Podcasts\"), __jsx(PodcastListWithClick, {\n        podcasts: audioClips,\n        onClickPodcast: this.openPodcast\n      }), __jsx(_JSXStyle, {\n        id: \"1404733386\"\n      }, \".banner.jsx-1404733386{width:100%;padding-bottom:25%;background-position:50% 50%;background-size:cover;background-color:#aaa;}h1.jsx-1404733386{font-weight:600;padding:15px;}h2.jsx-1404733386{padding:15px;font-size:1.2em;font-weight:600;margin:0;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2p1YW5jaG8vRG9jdW1lbnRvcy9wbGF0emkvTmV4dC9wYWdlcy9jaGFubmVsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRGa0IsQUFHc0IsQUFPSyxBQUlILFdBVk0sRUFXSCxHQUpILGFBQ2YsQUFJa0IsQ0FYWSxlQVluQixTQUNYLElBWndCLHNCQUNBLHNCQUN4QiIsImZpbGUiOiIvaG9tZS9qdWFuY2hvL0RvY3VtZW50b3MvcGxhdHppL05leHQvcGFnZXMvY2hhbm5lbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnaXNvbW9ycGhpYy1mZXRjaCdcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9MYXlvdXQnXG5pbXBvcnQgQ2hhbm5lbEdyaWQgZnJvbSAnLi4vY29tcG9uZW50cy9DaGFubmVsR3JpZCdcbmltcG9ydCBQb2RjYXN0TGlzdCBmcm9tICcuLi9jb21wb25lbnRzL1BvZGNhc3RMaXN0J1xuaW1wb3J0IFBvZGNhc3RMaXN0V2l0aENsaWNrIGZyb20gJy4uL2NvbXBvbmVudHMvUG9kY2FzdExpc3RXaXRoQ2xpY2snXG5pbXBvcnQgUG9kY2FzdFBsYXllciBmcm9tICcuLi9jb21wb25lbnRzL1BvZGNhc3RQbGF5ZXInXG5pbXBvcnQgRXJyb3IgZnJvbSAnLi9fZXJyb3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc3RhdGUgPSB7IG9wZW5Qb2RjYXN0OiBudWxsIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRJbml0aWFsUHJvcHMoeyBxdWVyeSwgcmVzIH0pIHtcbiAgICBsZXQgaWRDaGFubmVsID0gcXVlcnkuaWRcblxuICAgIHRyeSB7XG4gICAgICBsZXQgW3JlcUNoYW5uZWwsIHJlcVNlcmllcywgcmVxQXVkaW9zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZmV0Y2goYGh0dHBzOi8vYXBpLmF1ZGlvYm9vbS5jb20vY2hhbm5lbHMvJHtpZENoYW5uZWx9YCksXG4gICAgICAgIGZldGNoKGBodHRwczovL2FwaS5hdWRpb2Jvb20uY29tL2NoYW5uZWxzLyR7aWRDaGFubmVsfS9jaGlsZF9jaGFubmVsc2ApLFxuICAgICAgICBmZXRjaChgaHR0cHM6Ly9hcGkuYXVkaW9ib29tLmNvbS9jaGFubmVscy8ke2lkQ2hhbm5lbH0vYXVkaW9fY2xpcHNgKVxuICAgICAgXSlcblxuICAgICAgaWYoIHJlcUNoYW5uZWwuc3RhdHVzID49IDQwMCApIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSByZXFDaGFubmVsLnN0YXR1c1xuICAgICAgICByZXR1cm4geyBjaGFubmVsOiBudWxsLCBhdWRpb0NsaXBzOiBudWxsLCBzZXJpZXM6IG51bGwsIHN0YXR1c0NvZGU6IHJlcUNoYW5uZWwuc3RhdHVzIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGRhdGFDaGFubmVsID0gYXdhaXQgcmVxQ2hhbm5lbC5qc29uKClcbiAgICAgIGxldCBjaGFubmVsID0gZGF0YUNoYW5uZWwuYm9keS5jaGFubmVsXG5cbiAgICAgIGxldCBkYXRhQXVkaW9zID0gYXdhaXQgcmVxQXVkaW9zLmpzb24oKVxuICAgICAgbGV0IGF1ZGlvQ2xpcHMgPSBkYXRhQXVkaW9zLmJvZHkuYXVkaW9fY2xpcHNcblxuICAgICAgbGV0IGRhdGFTZXJpZXMgPSBhd2FpdCByZXFTZXJpZXMuanNvbigpXG4gICAgICBsZXQgc2VyaWVzID0gZGF0YVNlcmllcy5ib2R5LmNoYW5uZWxzXG5cbiAgICAgIHJldHVybiB7IGNoYW5uZWwsIGF1ZGlvQ2xpcHMsIHNlcmllcywgc3RhdHVzQ29kZTogMjAwIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJldHVybiB7IGNoYW5uZWw6IG51bGwsIGF1ZGlvQ2xpcHM6IG51bGwsIHNlcmllczogbnVsbCwgc3RhdHVzQ29kZTogNTAzIH1cbiAgICB9XG4gIH1cblxuICBvcGVuUG9kY2FzdCA9IChldmVudCwgcG9kY2FzdCkgPT4ge1xuICAgIGlmICggZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IChldmVudC5uYXRpdmVFdmVudCAmJiBldmVudC5uYXRpdmVFdmVudC53aGljaCA9PT0gMikgKSB7XG4gICAgICAvLyBTaSBlc3TDg8KhIGhhY2llbmRvIEN0cmwrQ2xpY2sgbyBDbWQrQ2xpY2ssIGRlamFtb3MgcXVlIGVsIGNsaWNrIHN1Y2VkYSBub3JtYWxtZW50ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgb3BlblBvZGNhc3Q6IHBvZGNhc3RcbiAgICB9KVxuICB9XG5cbiAgY2xvc2VQb2RjYXN0ID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgb3BlblBvZGNhc3Q6IG51bGxcbiAgICB9KVxuICB9XG4gIFxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjaGFubmVsLCBhdWRpb0NsaXBzLCBzZXJpZXMsIHN0YXR1c0NvZGUgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IG9wZW5Qb2RjYXN0IH0gPSB0aGlzLnN0YXRlXG5cbiAgICBpZiggc3RhdHVzQ29kZSAhPT0gMjAwICkge1xuICAgICAgcmV0dXJuIDxFcnJvciBzdGF0dXNDb2RlPXsgc3RhdHVzQ29kZSB9IC8+XG4gICAgfVxuXG4gICAgcmV0dXJuIDxMYXlvdXQgdGl0bGU9e2NoYW5uZWwudGl0bGV9PlxuXG4gICAgICB7IG9wZW5Qb2RjYXN0ICYmIFxuICAgICAgICA8UG9kY2FzdFBsYXllciBjbGlwPXsgb3BlblBvZGNhc3QgfSBvbkNsb3NlPXsgdGhpcy5jbG9zZVBvZGNhc3QgfSAvPlxuICAgICAgfVxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJhbm5lclwiIHN0eWxlPXt7IGJhY2tncm91bmRJbWFnZTogYHVybCgke2NoYW5uZWwudXJscy5iYW5uZXJfaW1hZ2Uub3JpZ2luYWx9KWAgfX0gLz5cbiAgICAgIFxuICAgICAgPGgxPnsgY2hhbm5lbC50aXRsZSB9PC9oMT5cblxuICAgICAgeyBzZXJpZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxoMj5TZXJpZXM8L2gyPlxuICAgICAgICAgIDxDaGFubmVsR3JpZCBjaGFubmVscz17IHNlcmllcyB9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgfVxuXG4gICAgICA8aDI+VWx0aW1vcyBQb2RjYXN0czwvaDI+XG4gICAgICA8UG9kY2FzdExpc3RXaXRoQ2xpY2sgcG9kY2FzdHM9eyBhdWRpb0NsaXBzIH0gb25DbGlja1BvZGNhc3Q9eyB0aGlzLm9wZW5Qb2RjYXN0IH0gLz5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuYmFubmVyIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMjUlO1xuICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IDUwJSA1MCU7XG4gICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWFhO1xuICAgICAgICB9XG4gICAgICAgIGgxIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgaDIge1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICB9XG59Il19 */\\n/*@ sourceURL=/home/juancho/Documentos/platzi/Next/pages/channel.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var query, res, idChannel, _ref2, _ref3, reqChannel, reqSeries, reqAudios, dataChannel, channel, dataAudios, audioClips, dataSeries, series;\n\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              query = _ref.query, res = _ref.res;\n              idChannel = query.id;\n              _context.prev = 2;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(_Promise.all([fetch(\"https://api.audioboom.com/channels/\".concat(idChannel)), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/child_channels\")), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/audio_clips\"))]));\n\n            case 5:\n              _ref2 = _context.sent;\n              _ref3 = _slicedToArray(_ref2, 3);\n              reqChannel = _ref3[0];\n              reqSeries = _ref3[1];\n              reqAudios = _ref3[2];\n\n              if (!(reqChannel.status >= 400)) {\n                _context.next = 13;\n                break;\n              }\n\n              res.statusCode = reqChannel.status;\n              return _context.abrupt(\"return\", {\n                channel: null,\n                audioClips: null,\n                series: null,\n                statusCode: reqChannel.status\n              });\n\n            case 13:\n              _context.next = 15;\n              return _regeneratorRuntime.awrap(reqChannel.json());\n\n            case 15:\n              dataChannel = _context.sent;\n              channel = dataChannel.body.channel;\n              _context.next = 19;\n              return _regeneratorRuntime.awrap(reqAudios.json());\n\n            case 19:\n              dataAudios = _context.sent;\n              audioClips = dataAudios.body.audio_clips;\n              _context.next = 23;\n              return _regeneratorRuntime.awrap(reqSeries.json());\n\n            case 23:\n              dataSeries = _context.sent;\n              series = dataSeries.body.channels;\n              return _context.abrupt(\"return\", {\n                channel: channel,\n                audioClips: audioClips,\n                series: series,\n                statusCode: 200\n              });\n\n            case 28:\n              _context.prev = 28;\n              _context.t0 = _context[\"catch\"](2);\n              return _context.abrupt(\"return\", {\n                channel: null,\n                audioClips: null,\n                series: null,\n                statusCode: 503\n              });\n\n            case 31:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[2, 28]]);\n    }\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/home/juancho/Documentos/platzi/Next/pages/channel.js"],"names":["Layout","ChannelGrid","PodcastList","PodcastListWithClick","PodcastPlayer","Error","props","event","podcast","metaKey","ctrlKey","shiftKey","nativeEvent","which","preventDefault","setState","openPodcast","state","channel","audioClips","series","statusCode","title","closePodcast","backgroundImage","urls","banner_image","original","length","query","res","idChannel","id","all","fetch","reqChannel","reqSeries","reqAudios","status","json","dataChannel","body","dataAudios","audio_clips","dataSeries","channels","React","Component"],"mappings":"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","sourcesContent":["import 'isomorphic-fetch'\nimport Layout from '../components/Layout'\nimport ChannelGrid from '../components/ChannelGrid'\nimport PodcastList from '../components/PodcastList'\nimport PodcastListWithClick from '../components/PodcastListWithClick'\nimport PodcastPlayer from '../components/PodcastPlayer'\nimport Error from './_error'\n\nexport default class extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = { openPodcast: null }\n  }\n\n  static async getInitialProps({ query, res }) {\n    let idChannel = query.id\n\n    try {\n      let [reqChannel, reqSeries, reqAudios] = await Promise.all([\n        fetch(`https://api.audioboom.com/channels/${idChannel}`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\n      ])\n\n      if( reqChannel.status >= 400 ) {\n        res.statusCode = reqChannel.status\n        return { channel: null, audioClips: null, series: null, statusCode: reqChannel.status }\n      }\n\n      let dataChannel = await reqChannel.json()\n      let channel = dataChannel.body.channel\n\n      let dataAudios = await reqAudios.json()\n      let audioClips = dataAudios.body.audio_clips\n\n      let dataSeries = await reqSeries.json()\n      let series = dataSeries.body.channels\n\n      return { channel, audioClips, series, statusCode: 200 }\n    } catch(e) {\n      return { channel: null, audioClips: null, series: null, statusCode: 503 }\n    }\n  }\n\n  openPodcast = (event, podcast) => {\n    if ( event.metaKey || event.ctrlKey || event.shiftKey || (event.nativeEvent && event.nativeEvent.which === 2) ) {\n      // Si estÃ¡ haciendo Ctrl+Click o Cmd+Click, dejamos que el click suceda normalmente\n      return\n    }\n\n    event.preventDefault()\n    this.setState({\n      openPodcast: podcast\n    })\n  }\n\n  closePodcast = (event) => {\n    event.preventDefault()\n    this.setState({\n      openPodcast: null\n    })\n  }\n  \n  render() {\n    const { channel, audioClips, series, statusCode } = this.props\n    const { openPodcast } = this.state\n\n    if( statusCode !== 200 ) {\n      return <Error statusCode={ statusCode } />\n    }\n\n    return <Layout title={channel.title}>\n\n      { openPodcast && \n        <PodcastPlayer clip={ openPodcast } onClose={ this.closePodcast } />\n      }\n\n      <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\n      \n      <h1>{ channel.title }</h1>\n\n      { series.length > 0 &&\n        <div>\n          <h2>Series</h2>\n          <ChannelGrid channels={ series } />\n        </div>\n      }\n\n      <h2>Ultimos Podcasts</h2>\n      <PodcastListWithClick podcasts={ audioClips } onClickPodcast={ this.openPodcast } />\n\n      <style jsx>{`\n        .banner {\n          width: 100%;\n          padding-bottom: 25%;\n          background-position: 50% 50%;\n          background-size: cover;\n          background-color: #aaa;\n        }\n        h1 {\n          font-weight: 600;\n          padding: 15px;\n        }\n        h2 {\n          padding: 15px;\n          font-size: 1.2em;\n          font-weight: 600;\n          margin: 0;\n        }\n      `}</style>\n    </Layout>\n  }\n}"]},"metadata":{},"sourceType":"module"}